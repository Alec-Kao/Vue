(function(){"use strict";var e={9436:function(e,a,t){var l=t(4936),n=t(1449),o=t(7966),i=(0,l.pM)({__name:"App",setup(e){const a=(0,n.Pj)(),t=e=>void 0===e||null===e||"object"===typeof e&&0===Object.keys(e).length||"string"===typeof e&&0===e.trim().length;return(0,l.sV)((()=>{const e=localStorage.getItem("eleToken");if(e){const l=o.s(e);a.dispatch("setAuthenticated",!t(l)),a.dispatch("setUser",l)}})),(e,a)=>{const t=(0,l.g2)("router-view");return(0,l.uX)(),(0,l.Wv)(t)}}});const r=i;var s=r,d=t(8194),u=t(238),c=t(8057),p=t(9053);const m={class:"index"},g={class:"rightContainer"};function f(e,a,t,n,o,i){const r=(0,l.g2)("HeadNav"),s=(0,l.g2)("LeftMenu"),d=(0,l.g2)("router-view");return(0,l.uX)(),(0,l.CE)("div",m,[(0,l.bF)(r),(0,l.bF)(s),(0,l.Lk)("div",g,[(0,l.bF)(d)]),(0,l.bF)(d)])}var h=t.p+"assets/img/logo.2975b4d8.png",b=t(7383);const _={class:"head-nav"},k={class:"userinfo"},v=["src"],y={class:"welcome"},F={class:"name avatarname"},w={class:"username"},T={class:"el-dropdown-link"};var x=(0,l.pM)({__name:"HeadNav",setup(e){(0,l.KR)({avatar:"/assets/avatar.png",comename:"歡迎",avatarname:"Kao Alec"});const a=(0,n.Pj)(),t=(0,p.rd)(),o=(0,l.EW)((()=>a.getters.user)),i=e=>{switch(e){case"info":r();break;case"logout":s();break}},r=()=>{t.push("/infoshow")},s=()=>{localStorage.removeItem("eleToken"),a.dispatch("clearCurrentState"),t.push("./login")};return(e,a)=>{const t=(0,l.g2)("el-icon"),n=(0,l.g2)("el-dropdown-item"),r=(0,l.g2)("el-dropdown-menu"),s=(0,l.g2)("el-dropdown"),d=(0,l.g2)("el-row");return(0,l.uX)(),(0,l.CE)("header",_,[(0,l.bF)(d,{class:"header-inner"},{default:(0,l.k6)((()=>[a[3]||(a[3]=(0,l.Lk)("div",{class:"logo-container"},[(0,l.Lk)("img",{src:h,class:"logo",alt:""}),(0,l.Lk)("span",{class:"title"},"雋喆線上後台管理系統")],-1)),(0,l.Lk)("div",k,[(0,l.Lk)("img",{src:o.value.avatar,class:"avatar",alt:""},null,8,v),(0,l.Lk)("div",y,[a[0]||(a[0]=(0,l.Lk)("p",{class:"name comename"},"歡迎",-1)),(0,l.Lk)("p",F,(0,l.v_)(o.value.name),1)]),(0,l.Lk)("span",w,[(0,l.bF)(s,{trigger:"click",onCommand:i},{dropdown:(0,l.k6)((()=>[(0,l.bF)(r,null,{default:(0,l.k6)((()=>[(0,l.bF)(n,{command:"info"},{default:(0,l.k6)((()=>a[1]||(a[1]=[(0,l.eW)("個人資訊")]))),_:1,__:[1]}),(0,l.bF)(n,{command:"logout"},{default:(0,l.k6)((()=>a[2]||(a[2]=[(0,l.eW)("退出")]))),_:1,__:[2]})])),_:1})])),default:(0,l.k6)((()=>[(0,l.Lk)("span",T,[(0,l.bF)(t,{class:"el-icon--right"},{default:(0,l.k6)((()=>[(0,l.bF)((0,l.R1)(b.yd$))])),_:1})])])),_:1})])])])),_:1,__:[3]})])}}}),L=t(1169);const V=(0,L.A)(x,[["__scopeId","data-v-24ffdcfc"]]);var D=V;function C(e,a,t,n,o,i){const r=(0,l.g2)("House"),s=(0,l.g2)("el-icon"),d=(0,l.g2)("el-menu-item"),u=(0,l.g2)("el-sub-menu"),c=(0,l.g2)("el-menu"),p=(0,l.g2)("el-col"),m=(0,l.g2)("el-row");return(0,l.uX)(),(0,l.Wv)(m,{class:"menu_page"},{default:(0,l.k6)((()=>[(0,l.bF)(p,null,{default:(0,l.k6)((()=>[(0,l.bF)(c,{"default-active":e.$route.path,class:"el-menu-vertical-demo","background-color":"#324057","text-color":"#fff","active-text-color":"#409eff",router:""},{default:(0,l.k6)((()=>[(0,l.bF)(d,{index:"/home"},{default:(0,l.k6)((()=>[(0,l.bF)(s,null,{default:(0,l.k6)((()=>[(0,l.bF)(r)])),_:1}),a[0]||(a[0]=(0,l.Lk)("span",null,"首頁",-1))])),_:1,__:[0]}),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.items,(e=>((0,l.uX)(),(0,l.Wv)(u,{key:e.path,index:"/"+e.path},{title:(0,l.k6)((()=>[(0,l.bF)(s,null,{default:(0,l.k6)((()=>[((0,l.uX)(),(0,l.Wv)((0,l.$y)(e.iconComponent)))])),_:2},1024),(0,l.Lk)("span",null,(0,l.v_)(e.name),1)])),default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.children,((e,a)=>((0,l.uX)(),(0,l.Wv)(d,{key:a,index:"/"+e.path},{default:(0,l.k6)((()=>[(0,l.Lk)("span",null,(0,l.v_)(e.name),1)])),_:2},1032,["index"])))),128))])),_:2},1032,["index"])))),128))])),_:1},8,["default-active"])])),_:1})])),_:1})}var E=(0,l.pM)({name:"left-menu",components:{House:b.tTi},data(){return{items:[{icon:"fa-money",name:"資金管理",path:"fund",iconComponent:b.uWV,children:[{path:"fundlist",name:"資金流水"}]},{icon:"fa-asterisk",name:"訊息管理",path:"info",iconComponent:b.KJW,children:[{path:"infoshow",name:"個人資訊"}]}]}}});const A=(0,L.A)(E,[["render",C],["__scopeId","data-v-681d4fe6"]]);var S=A,U={name:"index",components:{HeadNav:D,LeftMenu:S}};const z=(0,L.A)(U,[["render",f]]);var W=z;const j={class:"register"},X={class:"form_container"},I={class:"manage_tip"};var P=(0,l.pM)({__name:"Register",setup(e){const a=(0,p.rd)(),t=(0,l.KR)(),n=(0,l.Kh)({name:"",email:"",password:"",password2:"",identity:""}),o=(e,a,t)=>{a!==n.password?t(new Error("密碼不一致")):t()},i={name:[{required:!0,message:"帳號不能為空",trigger:"blur"},{min:2,max:30,message:"長度在2到30個字",trigger:"blur"}],email:[{type:"email",required:!0,message:"email格式不正確",trigger:"blur"}],password:[{required:!0,message:"密碼不能為空",trigger:"blur"},{min:6,max:30,message:"長度在6~30個字",trigger:"blur"}],password2:[{required:!0,message:"確認密碼不能為空",trigger:"blur"},{min:6,max:30,message:"長度在6~30個字",trigger:"blur"},{validator:o,trigger:"blur"}],identity:[{required:!0,message:"請選擇身分",trigger:"change"}]},r=()=>{t.value&&t.value.validate((e=>{e&&(d.A.post("/api/users/register",n).then((e=>{(0,c.nk)({message:"帳號註冊成功",type:"success"})})),a.push("/login"))}))};return(e,a)=>{const o=(0,l.g2)("el-input"),s=(0,l.g2)("el-form-item"),d=(0,l.g2)("el-option"),u=(0,l.g2)("el-select"),c=(0,l.g2)("el-button"),p=(0,l.g2)("el-form");return(0,l.uX)(),(0,l.CE)("div",j,[(0,l.Lk)("section",X,[(0,l.Lk)("div",I,[a[6]||(a[6]=(0,l.Lk)("span",{class:"title"},"雋喆在線後台管理系統-練習",-1)),(0,l.bF)(p,{rules:i,ref_key:"registerForm",ref:t,model:n,class:"registerForm","label-width":"80px"},{default:(0,l.k6)((()=>[(0,l.bF)(s,{label:"帳號名稱",prop:"name"},{default:(0,l.k6)((()=>[(0,l.bF)(o,{modelValue:n.name,"onUpdate:modelValue":a[0]||(a[0]=e=>n.name=e),placeholder:"請輸入帳號"},null,8,["modelValue"])])),_:1}),(0,l.bF)(s,{label:"電子郵件",prop:"email"},{default:(0,l.k6)((()=>[(0,l.bF)(o,{modelValue:n.email,"onUpdate:modelValue":a[1]||(a[1]=e=>n.email=e),placeholder:"請輸入email"},null,8,["modelValue"])])),_:1}),(0,l.bF)(s,{label:"密碼",prop:"password"},{default:(0,l.k6)((()=>[(0,l.bF)(o,{type:"password",modelValue:n.password,"onUpdate:modelValue":a[2]||(a[2]=e=>n.password=e),placeholder:"請輸入密碼"},null,8,["modelValue"])])),_:1}),(0,l.bF)(s,{label:"確認密碼",prop:"password2"},{default:(0,l.k6)((()=>[(0,l.bF)(o,{type:"password",modelValue:n.password2,"onUpdate:modelValue":a[3]||(a[3]=e=>n.password2=e),placeholder:"請再次輸入密碼"},null,8,["modelValue"])])),_:1}),(0,l.bF)(s,{label:"選擇身分",prop:"identity"},{default:(0,l.k6)((()=>[(0,l.bF)(u,{modelValue:n.identity,"onUpdate:modelValue":a[4]||(a[4]=e=>n.identity=e),placeholder:"請選擇身分"},{default:(0,l.k6)((()=>[(0,l.bF)(d,{label:"管理員",value:"manager"}),(0,l.bF)(d,{label:"員工",value:"employee"})])),_:1},8,["modelValue"])])),_:1}),(0,l.bF)(s,null,{default:(0,l.k6)((()=>[(0,l.bF)(c,{type:"primary",class:"submit_btn",onClick:r},{default:(0,l.k6)((()=>a[5]||(a[5]=[(0,l.eW)("註冊")]))),_:1,__:[5]})])),_:1})])),_:1},8,["model"])])])])}}});const $=(0,L.A)(P,[["__scopeId","data-v-91afa404"]]);var O=$;const R={class:"login"},q={class:"form_container"},H={class:"manage_tip"},K={class:"tiparea"};var M=(0,l.pM)({__name:"Login",setup(e){const a=(0,n.Pj)(),t=(0,p.rd)(),i=(0,l.KR)(),r=(0,l.Kh)({email:"",password:""}),s={email:[{type:"email",required:!0,message:"email格式不正確",trigger:"blur"}],password:[{required:!0,message:"密碼不能為空",trigger:"blur"},{min:6,max:30,message:"長度在6~30個字",trigger:"blur"}]},u=()=>{i.value&&i.value.validate((e=>{e&&d.A.post("/api/users/login",r).then((e=>{const{token:l}=e.data;localStorage.setItem("eleToken",l);const n=o.s(l);a.dispatch("setAuthenticated",Boolean(n)),a.dispatch("setUser",n),t.push("/index")}))}))};return(e,a)=>{const t=(0,l.g2)("el-input"),n=(0,l.g2)("el-form-item"),o=(0,l.g2)("el-button"),d=(0,l.g2)("router-link"),c=(0,l.g2)("el-form");return(0,l.uX)(),(0,l.CE)("div",R,[(0,l.Lk)("section",q,[(0,l.Lk)("div",H,[a[5]||(a[5]=(0,l.Lk)("span",{class:"title"},"雋喆在線後台管理系統-練習",-1)),(0,l.bF)(c,{rules:s,ref_key:"loginForm",ref:i,model:r,class:"loginForm","label-width":"80px"},{default:(0,l.k6)((()=>[(0,l.bF)(n,{label:"電子郵件",prop:"email"},{default:(0,l.k6)((()=>[(0,l.bF)(t,{modelValue:r.email,"onUpdate:modelValue":a[0]||(a[0]=e=>r.email=e),placeholder:"請輸入email"},null,8,["modelValue"])])),_:1}),(0,l.bF)(n,{label:"密碼",prop:"password"},{default:(0,l.k6)((()=>[(0,l.bF)(t,{type:"password",modelValue:r.password,"onUpdate:modelValue":a[1]||(a[1]=e=>r.password=e),placeholder:"請輸入密碼"},null,8,["modelValue"])])),_:1}),(0,l.bF)(n,null,{default:(0,l.k6)((()=>[(0,l.bF)(o,{type:"primary",class:"submit_btn",onClick:u},{default:(0,l.k6)((()=>a[2]||(a[2]=[(0,l.eW)("登入")]))),_:1,__:[2]})])),_:1}),(0,l.Lk)("div",K,[(0,l.Lk)("p",null,[a[4]||(a[4]=(0,l.eW)("還沒有帳號? 現在")),(0,l.bF)(d,{to:"/register"},{default:(0,l.k6)((()=>a[3]||(a[3]=[(0,l.eW)("註冊")]))),_:1,__:[3]})])])])),_:1},8,["model"])])])])}}});const N=(0,L.A)(M,[["__scopeId","data-v-5c58aa6f"]]);var Q=N,B=t.p+"assets/img/404.d2064167.gif";const G={class:"notfound"};function J(e,a,t,n,o,i){return(0,l.uX)(),(0,l.CE)("div",G,a[0]||(a[0]=[(0,l.Lk)("img",{src:B,alt:""},null,-1)]))}var Y={name:"index",components:{HeadNav:D}};const Z=(0,L.A)(Y,[["render",J],["__scopeId","data-v-35ecd159"]]);var ee=Z;const ae={class:"home"};function te(e,a){return(0,l.uX)(),(0,l.CE)("div",ae,a[0]||(a[0]=[(0,l.Lk)("div",{class:"container"},[(0,l.Lk)("h1",{class:"title"},"雋喆在縣"),(0,l.Lk)("p",{class:"lead"}," 練習假設: 線上課程 ")],-1)]))}const le={},ne=(0,L.A)(le,[["render",te],["__scopeId","data-v-29980bd4"]]);var oe=ne;const ie={class:"infoshow"},re={class:"user"},se=["src"],de={class:"userinfo"},ue={class:"user-item"},ce={class:"user-item"};function pe(e,a,t,n,o,i){const r=(0,l.g2)("el-col"),s=(0,l.g2)("el-row");return(0,l.uX)(),(0,l.CE)("div",ie,[(0,l.bF)(s,{type:"flex",class:"row-bg",justify:"center"},{default:(0,l.k6)((()=>[(0,l.bF)(r,{span:8},{default:(0,l.k6)((()=>[(0,l.Lk)("div",re,[(0,l.Lk)("img",{src:i.user.avatar,class:"avatar",alt:""},null,8,se)])])),_:1}),(0,l.bF)(r,{span:16},{default:(0,l.k6)((()=>[(0,l.Lk)("div",de,[(0,l.Lk)("div",ue,[a[0]||(a[0]=(0,l.Lk)("i",{class:"fa fa-user"},null,-1)),(0,l.Lk)("span",null,(0,l.v_)(i.user.name),1)]),(0,l.Lk)("div",ce,[a[1]||(a[1]=(0,l.Lk)("i",{class:"fa fa-cog"},null,-1)),(0,l.Lk)("span",null,(0,l.v_)("manager"==i.user.identity?"管理員":"一般員工"),1)])])])),_:1})])),_:1})])}var me={name:"infoshow",computed:{user(){return this.$store.getters.user}}};const ge=(0,L.A)(me,[["render",pe],["__scopeId","data-v-4d5ad14e"]]);var fe=ge;const he={class:"fillContainer"},be={class:"table_container"},_e={style:{display:"flex","align-items":"center"}},ke={style:{"margin-left":"10px"}},ve={style:{display:"flex","align-items":"center","justify-content":"center"}},ye={style:{color:"#00d053"}},Fe={style:{display:"flex","align-items":"center","justify-content":"center"}},we={style:{color:"#f56767"}},Te={style:{display:"flex","align-items":"center","justify-content":"center"}},xe={style:{color:"#4db3ff"}},Le={class:"pagination"};function Ve(e,a,t,n,o,i){const r=(0,l.g2)("el-date-picker"),s=(0,l.g2)("el-form-item"),d=(0,l.g2)("el-button"),u=(0,l.g2)("el-form"),c=(0,l.g2)("el-table-column"),p=(0,l.g2)("timer"),m=(0,l.g2)("el-icon"),g=(0,l.g2)("el-table"),f=(0,l.g2)("el-pagination"),h=(0,l.g2)("el-col"),b=(0,l.g2)("el-row"),_=(0,l.g2)("Dialog");return(0,l.uX)(),(0,l.CE)("div",he,[(0,l.Lk)("div",null,[(0,l.bF)(u,{inline:!0,res:"add_data",model:o.search_data},{default:(0,l.k6)((()=>[(0,l.bF)(s,{label:"按照時間篩選:"},{default:(0,l.k6)((()=>[(0,l.bF)(r,{modelValue:o.search_data.startTime,"onUpdate:modelValue":a[0]||(a[0]=e=>o.search_data.startTime=e),type:"datetime",placeholder:"選擇開始時間","default-time":e.defaultTime},null,8,["modelValue","default-time"]),a[6]||(a[6]=(0,l.eW)(" -- ")),(0,l.bF)(r,{modelValue:o.search_data.endTime,"onUpdate:modelValue":a[1]||(a[1]=e=>o.search_data.endTime=e),type:"datetime",placeholder:"選擇結束時間","default-time":e.defaultTime},null,8,["modelValue","default-time"])])),_:1,__:[6]}),(0,l.bF)(s,null,{default:(0,l.k6)((()=>[(0,l.bF)(d,{type:"primary",size:"small",onClick:a[2]||(a[2]=e=>i.handleSearch())},{default:(0,l.k6)((()=>a[7]||(a[7]=[(0,l.eW)("篩選")]))),_:1,__:[7]})])),_:1}),(0,l.bF)(s,{class:"btnRight"},{default:(0,l.k6)((()=>["manage"==i.user.identity?((0,l.uX)(),(0,l.Wv)(d,{key:0,type:"primary",size:"small",onClick:a[3]||(a[3]=e=>i.handleAdd())},{default:(0,l.k6)((()=>a[8]||(a[8]=[(0,l.eW)(" 新增 ")]))),_:1,__:[8]})):(0,l.Q3)("",!0)])),_:1})])),_:1},8,["model"])]),(0,l.Lk)("div",be,[o.tableData.length>0?((0,l.uX)(),(0,l.Wv)(g,{key:0,data:o.tableData,fit:!0,"max-height":"450",border:"","default-sort":{prop:"date",order:"descending"},style:{width:"100%"}},{default:(0,l.k6)((()=>[(0,l.bF)(c,{type:"index",label:"序號",align:"center","min-width":"70"}),(0,l.bF)(c,{prop:"date",label:"創建時間",align:"center","min-width":"250"},{default:(0,l.k6)((e=>[(0,l.Lk)("div",_e,[(0,l.bF)(m,null,{default:(0,l.k6)((()=>[(0,l.bF)(p)])),_:1}),(0,l.Lk)("span",ke,(0,l.v_)(e.row.date),1)])])),_:1}),(0,l.bF)(c,{prop:"type",label:"收支項目",align:"center","min-width":"150"}),(0,l.bF)(c,{prop:"describe",label:"收支描述",align:"center","min-width":"180"}),(0,l.bF)(c,{prop:"income",label:"收入",align:"center","min-width":"170"},{default:(0,l.k6)((e=>[(0,l.Lk)("div",ve,[(0,l.Lk)("span",ye,(0,l.v_)(e.row.income),1)])])),_:1}),(0,l.bF)(c,{prop:"expend",label:"支出",align:"center","min-width":"170"},{default:(0,l.k6)((e=>[(0,l.Lk)("div",Fe,[(0,l.Lk)("span",we,(0,l.v_)(e.row.expend),1)])])),_:1}),(0,l.bF)(c,{prop:"cash",label:"帳戶餘額",align:"center","min-width":"170"},{default:(0,l.k6)((e=>[(0,l.Lk)("div",Te,[(0,l.Lk)("span",xe,(0,l.v_)(e.row.cash),1)])])),_:1}),(0,l.bF)(c,{prop:"remark",label:"備註",align:"center","min-width":"220"}),"manager"==i.user.identity?((0,l.uX)(),(0,l.Wv)(c,{key:0,prop:"Operations",label:"操作",align:"center",fixed:"right","min-width":"180"},{default:(0,l.k6)((e=>[(0,l.bF)(d,{size:"small",type:"warning",onClick:a=>i.handleEdit(e.$index,e.row)},{default:(0,l.k6)((()=>a[9]||(a[9]=[(0,l.eW)(" 編輯 ")]))),_:2,__:[9]},1032,["onClick"]),(0,l.bF)(d,{size:"small",type:"danger",onClick:a=>i.handleDelete(e.$index,e.row)},{default:(0,l.k6)((()=>a[10]||(a[10]=[(0,l.eW)(" 刪除 ")]))),_:2,__:[10]},1032,["onClick"])])),_:1})):(0,l.Q3)("",!0)])),_:1},8,["data"])):(0,l.Q3)("",!0),(0,l.bF)(b,null,{default:(0,l.k6)((()=>[(0,l.bF)(h,{span:24},{default:(0,l.k6)((()=>[(0,l.Lk)("div",Le,[(0,l.bF)(f,{"current-page":o.paginations.page_index,"onUpdate:currentPage":a[4]||(a[4]=e=>o.paginations.page_index=e),"page-size":e.pageSize4,"onUpdate:pageSize":a[5]||(a[5]=a=>e.pageSize4=a),"page-sizes":o.paginations.page_sizes,size:o.paginations.page_size,disabled:e.disabled,background:e.background,layout:o.paginations.layout,total:o.paginations.total,onSizeChange:i.handleSizeChange,onCurrentChange:i.handleCurrentChange},null,8,["current-page","page-size","page-sizes","size","disabled","background","layout","total","onSizeChange","onCurrentChange"])])])),_:1})])),_:1})]),(0,l.bF)(_,{dialog:o.dialog,formData:o.formData,onUpdate:i.getProfile},null,8,["dialog","formData","onUpdate"])])}const De={class:"dialog"},Ce={class:"form"};function Ee(e,a,t,n,o,i){const r=(0,l.g2)("el-option"),s=(0,l.g2)("el-select"),d=(0,l.g2)("el-form-item"),u=(0,l.g2)("el-input"),c=(0,l.g2)("el-button"),p=(0,l.g2)("el-form"),m=(0,l.g2)("el-dialog");return(0,l.uX)(),(0,l.CE)("div",De,[(0,l.bF)(m,{modelValue:t.dialog.show,"onUpdate:modelValue":a[8]||(a[8]=e=>t.dialog.show=e),title:t.dialog.title,"close-on-click-modal":!1,"close-on-press-escape":!1,"append-to-body":!1},{default:(0,l.k6)((()=>[(0,l.Lk)("div",Ce,[(0,l.bF)(p,{ref:"form",model:t.formData,rules:o.form_rules,"label-width":"120px",style:{margin:"10px",width:"auto"}},{default:(0,l.k6)((()=>[(0,l.bF)(d,{label:"收支項目:"},{default:(0,l.k6)((()=>[(0,l.bF)(s,{modelValue:t.formData.type,"onUpdate:modelValue":a[0]||(a[0]=e=>t.formData.type=e),placeholder:"收支項目"},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(o.format_type_list,((e,a)=>((0,l.uX)(),(0,l.Wv)(r,{key:a,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,l.bF)(d,{prop:"describe",label:"收支描述"},{default:(0,l.k6)((()=>[(0,l.bF)(u,{type:"describe",modelValue:t.formData.describe,"onUpdate:modelValue":a[1]||(a[1]=e=>t.formData.describe=e)},null,8,["modelValue"])])),_:1}),(0,l.bF)(d,{prop:"income",label:"收入:"},{default:(0,l.k6)((()=>[(0,l.bF)(u,{type:"income",modelValue:t.formData.income,"onUpdate:modelValue":a[2]||(a[2]=e=>t.formData.income=e)},null,8,["modelValue"])])),_:1}),(0,l.bF)(d,{prop:"expend",label:"支出:"},{default:(0,l.k6)((()=>[(0,l.bF)(u,{type:"expend",modelValue:t.formData.expend,"onUpdate:modelValue":a[3]||(a[3]=e=>t.formData.expend=e)},null,8,["modelValue"])])),_:1}),(0,l.bF)(d,{prop:"cash",label:"帳戶現金:"},{default:(0,l.k6)((()=>[(0,l.bF)(u,{type:"cash",modelValue:t.formData.cash,"onUpdate:modelValue":a[4]||(a[4]=e=>t.formData.cash=e)},null,8,["modelValue"])])),_:1}),(0,l.bF)(d,{label:"備註:"},{default:(0,l.k6)((()=>[(0,l.bF)(u,{type:"textarea",modelValue:t.formData.remark,"onUpdate:modelValue":a[5]||(a[5]=e=>t.formData.remark=e)},null,8,["modelValue"])])),_:1}),(0,l.bF)(d,{class:"text_right"},{default:(0,l.k6)((()=>[(0,l.bF)(c,{onClick:a[6]||(a[6]=e=>i.visible=!1)},{default:(0,l.k6)((()=>a[9]||(a[9]=[(0,l.eW)("取消")]))),_:1,__:[9]}),(0,l.bF)(c,{type:"primary",onClick:a[7]||(a[7]=e=>i.onSubmit("form"))},{default:(0,l.k6)((()=>a[10]||(a[10]=[(0,l.eW)("提交")]))),_:1,__:[10]})])),_:1})])),_:1},8,["model","rules"])])])),_:1},8,["modelValue","title"])])}var Ae={name:"Dialog",data(){return{format_type_list:["提領","提領手續費","儲值","優惠券","儲值禮券","轉帳"],form_rules:{describe:[{required:!0,message:"收支描述不能為空"}],income:[{required:!0,message:"收入不能為空!",trigger:"blur"}],expend:[{required:!0,message:"支出不能為空!",trigger:"blur"}],cash:[{required:!0,message:"帳戶不能為空!",trigger:"blur"}]}}},props:{dialog:Object,formData:Object},computed:{visible:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}},methods:{onSubmit(e){this.$refs[e].validate((e=>{if(e){const e="add"==this.dialog.option?"add":`edit/${this.formData.id}`;d.A.post(`/api/profiles/${e}`,this.formData).then((e=>{this.$message({message:"新增數據成功",type:"success"})})),this.dialog.show=!1,this.$emit("update")}}))}}};const Se=(0,L.A)(Ae,[["render",Ee]]);var Ue=Se,ze={name:"fundList",components:{Timer:b.M4G,Dialog:Ue},data(){return{search_data:{startTime:"",endTime:"",filterTableData:[]},paginations:{page_index:1,total:0,page_size:5,page_sizes:[5,10,15,20],layout:"total, sizes, prev, pager, next, jumper"},tableData:[],allTableData:[],dialog:{show:!1,title:"",option:"edit"},formData:{type:"",describe:"",income:"",expend:"",cash:"",remark:"",id:""}}},computed:{user(){return this.$store.getters.user}},created(){this.getProfile()},methods:{getProfile(){d.A.get("/api/profiles").then((e=>{this.allTableData=e.data,this.filterTableData=e.data,this.setPaginations()})).catch((e=>{console.error("資料取得失敗",e)}))},setPaginations(){this.paginations.total=this.allTableData.length,this.paginations.page_index=1,this.paginations.page_sizes=5,this.tableData=this.allTableData.filter(((e,a)=>a<this.paginations.page_size))},handleEdit(e,a){this.dialog={show:!0,title:"修改資金訊息",option:"edit"},this.formData={type:a.type,describe:a.describe,income:a.income,expend:a.expend,cash:a.cash,remark:a.remark,id:a._id}},handleDelete(e,a){d.A.delete(`/api/profiles/delete/${a._id}`).then((e=>{this.$message("刪除成功!"),this.getProfile()}))},handleAdd(){this.dialog={show:!0,title:"新增資金訊息",option:"add"},this.formData={type:"",describe:"",income:"",expend:"",cash:"",remark:"",id:""}},handleSizeChange(e){this.paginations.page_index=1,this.paginations.page_size=e,this.tableData=this.allTableData.filter(((a,t)=>t<e))},handleCurrentChange(e){let a=this.paginations.page_size*(e-1),t=this.paginations.page_size*e,l=[];for(let n=a;n<t;n++)this.allTableData[n]&&l.push(this.allTableData[n]),this.tableData=l},handleSearch(){if(!this.search_data.startTime||!this.search_data.endTime)return this.$message({type:"warning",message:"請選擇時間區間"}),void this.getProfile();const e=this.search_data.startTime.getTime(),a=this.search_data.endTime.getTime();this.allTableData=this.filterTableData.filter((t=>{let l=new Date(t.date),n=l.getTime();return n>=e&&n<=a})),this.setPaginations()}}};const We=(0,L.A)(ze,[["render",Ve],["__scopeId","data-v-35746fe7"]]);var je=We;const Xe=[{path:"/",redirect:"/index"},{path:"/index",redirect:"index",component:W,children:[{path:"",component:oe},{path:"/home",name:"home",component:oe},{path:"/infoshow",name:"infoshow",component:fe},{path:"/fundlist",name:"fundlist",component:je}]},{path:"/register",name:"register",component:O},{path:"/login",name:"login",component:Q},{path:"/:pathMatch(.*)*",name:"/404",component:ee}],Ie=(0,p.aE)({history:(0,p.LA)("/"),routes:Xe});Ie.beforeEach(((e,a,t)=>{const l=!!localStorage.eleToken;"/login"==e.path||"/register"==e.path||l?t():t("/login")}));var Pe=Ie;d.A.create({baseURL:"/api",timeout:1e4});let $e;function Oe(){$e=u.Ks.service({lock:!0,text:"載入中",background:"rgba(0, 0, 0, 0.7)"})}function Re(){setTimeout((()=>{$e.close()}),300)}d.A.interceptors.request.use((e=>(Oe(),localStorage.eleToken&&(e.headers.Authorization=localStorage.eleToken),e)),(e=>Promise.reject(e))),d.A.interceptors.response.use((e=>(Re(),e)),(e=>{Re();const{status:a}=e.response;return 401==a&&("/login"!==Pe.currentRoute.value.path&&c.nk.error("請重新登入"),localStorage.removeItem("eleToken"),Pe.push("/login")),Promise.reject(e)}));var qe=d.A,He=t(1266);t(4188);const Ke={SET_AUTHENTICATED:"SET_AUTHENTICATED",SET_USER:"SET_USER"},Me={isAuthenticated:!1,user:{}},Ne={isAuthenticated:e=>e.isAuthenticated,user:e=>e.user},Qe={[Ke.SET_AUTHENTICATED](e,a){e.isAuthenticated=a||!1},[Ke.SET_USER](e,a){e.user=a||{}}},Be={setAuthenticated:({commit:e},a)=>{e(Ke.SET_AUTHENTICATED,a)},setUser:({commit:e},a)=>{e(Ke.SET_USER,a)},clearCurrentState:({commit:e})=>{e(Ke.SET_AUTHENTICATED,!1),e(Ke.SET_USER,null)}};var Ge=(0,n.y$)({state:Me,getters:Ne,mutations:Qe,actions:Be,modules:{}});const Je=(0,l.Ef)(s);Je.config.globalProperties.$axios=qe,(0,l.Ef)(s).use(Ge).use(Pe).use(He.A).mount("#app")}},a={};function t(l){var n=a[l];if(void 0!==n)return n.exports;var o=a[l]={exports:{}};return e[l].call(o.exports,o,o.exports,t),o.exports}t.m=e,function(){var e=[];t.O=function(a,l,n,o){if(!l){var i=1/0;for(u=0;u<e.length;u++){l=e[u][0],n=e[u][1],o=e[u][2];for(var r=!0,s=0;s<l.length;s++)(!1&o||i>=o)&&Object.keys(t.O).every((function(e){return t.O[e](l[s])}))?l.splice(s--,1):(r=!1,o<i&&(i=o));if(r){e.splice(u--,1);var d=n();void 0!==d&&(a=d)}}return a}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[l,n,o]}}(),function(){t.d=function(e,a){for(var l in a)t.o(a,l)&&!t.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:a[l]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){t.p="/"}(),function(){var e={524:0};t.O.j=function(a){return 0===e[a]};var a=function(a,l){var n,o,i=l[0],r=l[1],s=l[2],d=0;if(i.some((function(a){return 0!==e[a]}))){for(n in r)t.o(r,n)&&(t.m[n]=r[n]);if(s)var u=s(t)}for(a&&a(l);d<i.length;d++)o=i[d],t.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return t.O(u)},l=self["webpackChunkclient"]=self["webpackChunkclient"]||[];l.forEach(a.bind(null,0)),l.push=a.bind(null,l.push.bind(l))}();var l=t.O(void 0,[504],(function(){return t(9436)}));l=t.O(l)})();
//# sourceMappingURL=app.993852c6.js.map